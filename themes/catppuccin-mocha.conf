%hidden THEME_NAME="catppuccin-mocha"
# Created according to https://github.com/catppuccin/tmux/blob/c8a2d1ae9649aa904960bef1516ea2ff9a3e6ad0/themes/catppuccin_mocha_tmux.conf

# Surfaces colors
set -g @${PLUGIN_NAME}-thm-bg "#1e1e2e" # thm_bg
set -g @${PLUGIN_NAME}-thm-widget-bg "#1e1e2e" # thm_bg
set -g @${PLUGIN_NAME}-thm-widget-fg "#cdd6f4" # thm_fg
set -g @${PLUGIN_NAME}-thm-icon-fg "#1e1e2e" # thm_bg

set -g @${PLUGIN_NAME}-thm-current-window-bg "#45475a" # thm_surface_1

set -g @${PLUGIN_NAME}-thm-default-window-bg "#313244" # thm_surface_0
set -g @${PLUGIN_NAME}-thm-default-window-number-color "#9399b2" # thm_overlay_2

# Colors
set -g @${PLUGIN_NAME}-thm-green "#a6e3a1" # thm_green
set -g @${PLUGIN_NAME}-thm-red "#f38ba8" # thm_red
set -g @${PLUGIN_NAME}-thm-mauve "#cba6f7" # thm_mauve
set -g @${PLUGIN_NAME}-thm-teal "#94e2d5" # thm_teal
set -g @${PLUGIN_NAME}-thm-rosewater "#f5e0dc" # thm_rosewater
set -g @${PLUGIN_NAME}-thm-sapphire "#74c7ec" # thm_sapphire

# Defaults
set -og @${PLUGIN_NAME}-thm-left-corner ""
set -og @${PLUGIN_NAME}-thm-separator "█"
set -og @${PLUGIN_NAME}-thm-right-corner ""

## Status bg/fg
set -gF status-bg "#{?#{==:#{status-bg},default},#{@${PLUGIN_NAME}-thm-bg},#{status-bg}}"
set -gF status-fg "#{?#{==:#{status-fg},default},#{@${PLUGIN_NAME}-thm-widget-fg},#{status-fg}}"

## Message-style bg/fg/align
run-shell "if tmux display -p '#{message-style}' | grep -q 'bg=yellow'; then tmux set -g message-style \"\$(tmux display -p '#{message-style}' | sed 's/bg=yellow/bg=#{@${PLUGIN_NAME}-thm-current-window-bg}/')\"; fi"
run-shell "if tmux display -p '#{message-style}' | grep -q 'fg=black'; then tmux set -g message-style \"\$(tmux display -p '#{message-style}' | sed 's/fg=black/fg=#{@${PLUGIN_NAME}-thm-widget-fg}/')\"; fi"
run-shell "if ! tmux display -p '#{message-style}' | grep -q 'align='; then tmux set -g message-style \"\$(tmux display -p '#{message-style},align=centre')\"; fi"

## Message-command-style bg/fg/align
run-shell "if tmux display -p '#{message-command-style}' | grep -q 'bg=black'; then tmux set -g message-command-style \"\$(tmux display -p '#{message-command-style}' | sed 's/bg=black/bg=#{@${PLUGIN_NAME}-thm-widget-fg}/')\"; fi"
run-shell "if tmux display -p '#{message-command-style}' | grep -q 'fg=yellow'; then tmux set -g message-command-style \"\$(tmux display -p '#{message-command-style}' | sed 's/fg=yellow/fg=#{@${PLUGIN_NAME}-thm-current-window-bg}/')\"; fi"
run-shell "if ! tmux display -p '#{message-command-style}' | grep -q 'align='; then tmux set -g message-command-style \"\$(tmux display -p '#{message-command-style},align=centre')\"; fi"

# Widgets
## Directory
%hidden WIDGET_NAME="directory"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-value "#{E:@${PLUGIN_NAME}-thm-left-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-fg "#{E:@${PLUGIN_NAME}-thm-rosewater}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-bg "#{E:@${PLUGIN_NAME}-thm-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-value " "
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-fg "#{E:@${PLUGIN_NAME}-thm-icon-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-bg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p1-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-value " #{b:pane_current_path} "
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-fg "#{E:@${PLUGIN_NAME}-thm-widget-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-bg "#{E:@${PLUGIN_NAME}-thm-widget-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p4-value "#{E:@${PLUGIN_NAME}-thm-right-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p4-fg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p3-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p4-bg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p1-bg}"

## Session
%hidden WIDGET_NAME="session"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-value "█"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-fg "#{?client_prefix,#{E:@${PLUGIN_NAME}-thm-red},#{E:@${PLUGIN_NAME}-thm-green}}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-bg "#{E:@${PLUGIN_NAME}-thm-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-value " #S "
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-fg "#{E:@${PLUGIN_NAME}-thm-widget-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-bg "#{E:@${PLUGIN_NAME}-thm-widget-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-value "#{E:@${PLUGIN_NAME}-thm-right-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-fg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p2-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-bg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p1-bg}"

## Gitmux
%hidden WIDGET_NAME="gitmux"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-value "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-left-corner},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-fg "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-teal},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-bg "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-bg},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-value "#{?#(gitmux #{pane_current_path}),󰊢 ,}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-fg "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-icon-fg},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-bg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p1-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-value "#{?#(gitmux #{pane_current_path}), #(gitmux #{pane_current_path}),}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-fg "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-widget-fg},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-bg "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-widget-bg},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p4-value "#{?#(gitmux #{pane_current_path}),█,}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p4-fg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p3-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p4-bg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p1-bg}"

## DateTime
%hidden WIDGET_NAME="date-time"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-value "#{E:@${PLUGIN_NAME}-thm-left-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-fg "#{E:@${PLUGIN_NAME}-thm-sapphire}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-bg "#{E:@${PLUGIN_NAME}-thm-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-value "󰃰 "
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-fg "#{E:@${PLUGIN_NAME}-thm-icon-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-bg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p1-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-value " %H:%M"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-fg "#{E:@${PLUGIN_NAME}-thm-widget-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-bg "#{E:@${PLUGIN_NAME}-thm-widget-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p4-value "█"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p4-fg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p3-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p4-bg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p1-bg}"

## Current Window
%hidden WIDGET_NAME="current-window"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-value "#{E:@${PLUGIN_NAME}-thm-left-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-fg "#{E:@${PLUGIN_NAME}-thm-mauve}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-bg "#{E:@${PLUGIN_NAME}-thm-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-value "#I "
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-fg "#{E:@${PLUGIN_NAME}-thm-icon-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-bg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p1-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-value " #W#{?window_zoomed_flag,(),} "
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-fg "#{E:@${PLUGIN_NAME}-thm-widget-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-bg "#{E:@${PLUGIN_NAME}-thm-current-window-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p4-value "#{E:@${PLUGIN_NAME}-thm-right-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p4-fg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p3-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p4-bg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p1-bg}"

## Default Window
%hidden WIDGET_NAME="default-window"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-value "#{E:@${PLUGIN_NAME}-thm-left-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-fg "#{E:@${PLUGIN_NAME}-thm-default-window-number-color}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p1-bg "#{E:@${PLUGIN_NAME}-thm-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-value "#I "
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-fg "#{E:@${PLUGIN_NAME}-thm-icon-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p2-bg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p1-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-value " #W#{?window_zoomed_flag,(),} "
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-fg "#{E:@${PLUGIN_NAME}-thm-widget-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p3-bg "#{E:@${PLUGIN_NAME}-thm-default-window-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p4-value "#{E:@${PLUGIN_NAME}-thm-right-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p4-fg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p3-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-p4-bg "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-p1-bg}"

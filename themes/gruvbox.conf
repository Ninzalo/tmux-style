%hidden THEME_NAME="gruvbox"

# Surfaces colors
set -g @${PLUGIN_NAME}-thm-bg "#282828"
set -g @${PLUGIN_NAME}-thm-widget-bg "#3d3836"
set -g @${PLUGIN_NAME}-thm-widget-fg "#ebdbb2"
set -g @${PLUGIN_NAME}-thm-current-window-bg "#64605e"

# Colors
set -g @${PLUGIN_NAME}-thm-green "#b8bb26"
set -g @${PLUGIN_NAME}-thm-blue "#458588"
set -g @${PLUGIN_NAME}-thm-cyan "#83a598"
set -g @${PLUGIN_NAME}-thm-pink "#d3869b"
set -g @${PLUGIN_NAME}-thm-red "#fb4934"
set -g @${PLUGIN_NAME}-thm-orange "#d65d0e"
set -g @${PLUGIN_NAME}-thm-yellow "#d79921"

# Defaults
set -og @${PLUGIN_NAME}-thm-left-corner ""
set -og @${PLUGIN_NAME}-thm-separator "█"
set -og @${PLUGIN_NAME}-thm-right-corner ""

## Status bg/fg
set -gF status-bg "#{?#{==:#{status-bg},default},#{@${PLUGIN_NAME}-thm-bg},#{status-bg}}"
set -gF status-fg "#{?#{==:#{status-fg},default},#{@${PLUGIN_NAME}-thm-widget-fg},#{status-fg}}"

## Message-style bg/fg/align
run-shell "if tmux display -p '#{message-style}' | grep -q 'bg=yellow'; then tmux set -g message-style \"\$(tmux display -p '#{message-style}' | sed 's/bg=yellow/bg=#{@${PLUGIN_NAME}-thm-current-window-bg}/')\"; fi"
run-shell "if tmux display -p '#{message-style}' | grep -q 'fg=black'; then tmux set -g message-style \"\$(tmux display -p '#{message-style}' | sed 's/fg=black/fg=#{@${PLUGIN_NAME}-thm-widget-fg}/')\"; fi"
run-shell "if ! tmux display -p '#{message-style}' | grep -q 'align='; then tmux set -g message-style \"\$(tmux display -p '#{message-style},align=centre')\"; fi"

## Message-command-style bg/fg/align
run-shell "if tmux display -p '#{message-command-style}' | grep -q 'bg=black'; then tmux set -g message-command-style \"\$(tmux display -p '#{message-command-style}' | sed 's/bg=black/bg=#{@${PLUGIN_NAME}-thm-widget-fg}/')\"; fi"
run-shell "if tmux display -p '#{message-command-style}' | grep -q 'fg=yellow'; then tmux set -g message-command-style \"\$(tmux display -p '#{message-command-style}' | sed 's/fg=yellow/fg=#{@${PLUGIN_NAME}-thm-current-window-bg}/')\"; fi"
run-shell "if ! tmux display -p '#{message-command-style}' | grep -q 'align='; then tmux set -g message-command-style \"\$(tmux display -p '#{message-command-style},align=centre')\"; fi"

# Widgets
## Directory
%hidden WIDGET_NAME="directory"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-corner "#{E:@${PLUGIN_NAME}-thm-left-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-corner-color "#{E:@${PLUGIN_NAME}-thm-pink}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-icon " "
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-icon-color "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-left-corner-color}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-separator "#{E:@${PLUGIN_NAME}-thm-separator}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-separator-color "#{E:@${PLUGIN_NAME}-thm-widget-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text "#{b:pane_current_path}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text-fg "#{E:@${PLUGIN_NAME}-thm-widget-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text-bg "#{E:@${PLUGIN_NAME}-thm-widget-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-separator "#{E:@${PLUGIN_NAME}-thm-separator}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-separator-color "#{E:@${PLUGIN_NAME}-thm-widget-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-corner "#{E:@${PLUGIN_NAME}-thm-right-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-corner-color "#{E:@${PLUGIN_NAME}-thm-widget-bg}"

## Session
%hidden WIDGET_NAME="session"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-corner "#{E:@${PLUGIN_NAME}-thm-left-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-corner-color "#{?client_prefix,#{E:@${PLUGIN_NAME}-thm-red},#{E:@${PLUGIN_NAME}-thm-green}}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-icon ""
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-icon-color ""
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-separator "█ "
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-separator-color "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-left-corner-color}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text "#S"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text-fg "#{E:@${PLUGIN_NAME}-thm-widget-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text-bg "#{E:@${PLUGIN_NAME}-thm-widget-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-separator "#{E:@${PLUGIN_NAME}-thm-separator}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-separator-color "#{E:@${PLUGIN_NAME}-thm-widget-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-corner "#{E:@${PLUGIN_NAME}-thm-right-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-corner-color "#{E:@${PLUGIN_NAME}-thm-widget-bg}"

## Gitmux
%hidden WIDGET_NAME="gitmux"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-corner "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-left-corner},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-corner-color "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-green},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-icon "#{?#(gitmux #{pane_current_path}),󰊢 ,}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-icon-color "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-left-corner-color},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-separator "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-separator},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-separator-color "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-widget-bg},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text "#{?#(gitmux #{pane_current_path}),#(gitmux #{pane_current_path}),}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text-fg "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-widget-fg},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text-bg "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-widget-bg},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-separator "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-separator},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-separator-color "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-widget-bg},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-corner "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-right-corner},}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-corner-color "#{?#(gitmux #{pane_current_path}),#{E:@${PLUGIN_NAME}-thm-widget-bg},}"

## DateTime
%hidden WIDGET_NAME="date-time"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-corner "#{E:@${PLUGIN_NAME}-thm-left-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-corner-color "#{E:@${PLUGIN_NAME}-thm-blue}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-icon "󰃰 "
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-icon-color "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-left-corner-color}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-separator "#{E:@${PLUGIN_NAME}-thm-separator}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-separator-color "#{E:@${PLUGIN_NAME}-thm-widget-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text "%H:%M"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text-fg "#{E:@${PLUGIN_NAME}-thm-widget-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text-bg "#{E:@${PLUGIN_NAME}-thm-widget-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-separator "#{E:@${PLUGIN_NAME}-thm-separator}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-separator-color "#{E:@${PLUGIN_NAME}-thm-widget-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-corner ""
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-corner-color "#{E:@${PLUGIN_NAME}-thm-widget-bg}"

## Current Window
%hidden WIDGET_NAME="current-window"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-corner "#{E:@${PLUGIN_NAME}-thm-left-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-corner-color "#{E:@${PLUGIN_NAME}-thm-orange}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-icon "#I "
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-icon-color "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-left-corner-color}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-separator "#{E:@${PLUGIN_NAME}-thm-separator}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-separator-color "#{E:@${PLUGIN_NAME}-thm-current-window-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text "#W#{?window_zoomed_flag,(),}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text-fg "#{E:@${PLUGIN_NAME}-thm-widget-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text-bg "#{E:@${PLUGIN_NAME}-thm-current-window-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-separator "#{E:@${PLUGIN_NAME}-thm-separator}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-separator-color "#{E:@${PLUGIN_NAME}-thm-current-window-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-corner "#{E:@${PLUGIN_NAME}-thm-right-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-corner-color "#{E:@${PLUGIN_NAME}-thm-current-window-bg}"

## Default Window
%hidden WIDGET_NAME="default-window"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-corner "#{E:@${PLUGIN_NAME}-thm-left-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-corner-color "#{E:@${PLUGIN_NAME}-thm-blue}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-icon "#I "
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-icon-color "#{E:@${PLUGIN_NAME}-${WIDGET_NAME}-left-corner-color}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-separator "#{E:@${PLUGIN_NAME}-thm-separator}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-left-separator-color "#{E:@${PLUGIN_NAME}-thm-widget-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text "#W#{?window_zoomed_flag,(),}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text-fg "#{E:@${PLUGIN_NAME}-thm-widget-fg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-text-bg "#{E:@${PLUGIN_NAME}-thm-widget-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-separator "#{E:@${PLUGIN_NAME}-thm-separator}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-separator-color "#{E:@${PLUGIN_NAME}-thm-widget-bg}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-corner "#{E:@${PLUGIN_NAME}-thm-right-corner}"
set -ogq @${PLUGIN_NAME}-${WIDGET_NAME}-right-corner-color "#{E:@${PLUGIN_NAME}-thm-widget-bg}"
